(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{100:function(e,t,a){},102:function(e,t,a){},104:function(e,t){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},141:function(e,t){},150:function(e,t,a){},151:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(36),i=a.n(o),s=a(8),l=a(54),u=a(3),m=(a(100),a(15)),d=a.n(m),p=a(25),f=a(21),h=a(24),y=a(6),v=a(7),b=a(10),g=a(9),E=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=(a(102),a(84)),N=a.n(k),O=function(e){return"https://www.gravatar.com/avatar/".concat(N()(e).toString())},C=function(){return JSON.parse(localStorage.getItem("ranking"))||[]},j=function(e){var t=Object(p.a)(e);t.sort((function(e,t){return t.score-e.score})),localStorage.setItem("ranking",JSON.stringify(t))},S=function(e){return localStorage.setItem("token",e)},w=function(e){return{type:"TOKEN_SUCCESS",payload:e}},x=function(){return function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E("https://opentdb.com/api_token.php?command=request");case 3:a=e.sent,n=a.token,S(n),t(w(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},T=function(e){return{type:"TRIVIA_SUCCESS",payload:e}},I=[{value:"",name:"Todas"},{value:"easy",name:"F\xe1cil"},{value:"medium",name:"M\xe9dio"},{value:"hard",name:"Dif\xedcil"}],_=[{value:"",name:"Todos"},{value:"boolean",name:"Verdadeiro ou Falso"},{value:"multiple",name:"M\xfaltipla Escolha"}],q=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(e){var n,r=e.category,c=e.difficulty,o=e.type;return Object(y.a)(this,a),(n=t.call(this)).handleChange=function(e){var t=e.target,a=t.id,r=t.value,c=n.props,o=c.dispatchSetCategory,i=c.dispatchSetDifficulty,s=c.dispatchSetType;switch(a){case"category":o(r);break;case"difficulty":i(r);break;case"type":s(r)}n.setState(Object(h.a)({},a,r))},n.handleClick=function(){n.props.history.push("/")},n.state={categories:[],category:r,difficulty:c,type:o},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("https://opentdb.com/api_category.php");case 2:t=e.sent,a=t.trivia_categories,n=[{name:"Todas",id:""}].concat(Object(p.a)(a)),this.setState({categories:n});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.categories,a=e.category,n=e.difficulty,r=e.type;return c.a.createElement("main",{className:"Configuration"},c.a.createElement("section",{className:"title-container"},c.a.createElement("h1",{className:"config-title","data-testid":"settings-title"},"Configura\xe7\xf5es"),c.a.createElement("button",{className:"home-button","data-testid":"btn-go-home",type:"button",onClick:this.handleClick},"In\xedcio")),c.a.createElement("section",{className:"config-container"},c.a.createElement("label",{className:"config-label",htmlFor:"category"},"Categoria",c.a.createElement("select",{className:"config-select",id:"category",onChange:this.handleChange,value:a},t.map((function(e){var t=e.name,a=e.id;return c.a.createElement("option",{key:a,value:a},t)})))),c.a.createElement("label",{className:"config-label",htmlFor:"difficulty"},"Dificuldade",c.a.createElement("select",{className:"config-select",id:"difficulty",onChange:this.handleChange,value:n},I.map((function(e){var t=e.name,a=e.value;return c.a.createElement("option",{key:a,value:a},t)})))),c.a.createElement("label",{className:"config-label",htmlFor:"type"},"Tipo de Quest\xe3o",c.a.createElement("select",{className:"config-select",id:"type",onChange:this.handleChange,value:r},_.map((function(e){var t=e.name,a=e.value;return c.a.createElement("option",{key:a,value:a},t)}))))))}}]),a}(r.Component),R=Object(s.b)((function(e){return{category:e.configs.category,difficulty:e.configs.difficulty,type:e.configs.type}}),(function(e){return{dispatchSetCategory:function(t){return e(function(e){return{type:"SET_CATEGORY",payload:e}}(t))},dispatchSetDifficulty:function(t){return e(function(e){return{type:"SET_DIFFICULTY",payload:e}}(t))},dispatchSetType:function(t){return e(function(e){return{type:"SET_TYPE",payload:e}}(t))}}}))(q),F=a(85),A=a.n(F),M=(a(105),function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(y.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={gravatarEmail:"",name:""},e.handleChange=function(t){var a=t.target,n=a.id,r=a.value;e.setState(Object(h.a)({},n,r))},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.dispatchResetGame)()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.token,a=e.history;Boolean(t.length)&&a.push("/trivia")}},{key:"render",value:function(){var e=this,t=this.state,a=t.gravatarEmail,n=t.name,r=!(a.length&&n.length),o=this.props,i=o.dispatchSetUser,s=o.history,l=o.dispatchFetchToken;return c.a.createElement("div",{className:"container-form"},c.a.createElement("form",{action:"/action_page.php",method:"post",className:"container-form-box"},c.a.createElement("header",{className:"container-form-header"},c.a.createElement("img",{src:A.a,alt:"svg_avatar",className:"svg_avatar"})),c.a.createElement("main",{className:"container-form-main"},c.a.createElement("label",{htmlFor:"gravatarEmail",className:"container-form-main-label1"},c.a.createElement("input",{className:"container-form-main-label1-input1",id:"gravatarEmail",value:a,onChange:this.handleChange,"data-testid":"input-gravatar-email",type:"email",placeholder:"Email do Gravatar:",name:"gravatarEmail",required:!0})),c.a.createElement("label",{htmlFor:"name",className:"container-form-main-label2"},c.a.createElement("input",{className:"container-form-main-label2-input1",id:"name",value:n,onChange:this.handleChange,"data-testid":"input-player-name",type:"text",placeholder:"Nome do Jogador:",name:"name",required:!0})),c.a.createElement("button",{className:r?"container-form-main-button1 disabled":"container-form-main-button1",id:"play-Button",type:"button",disabled:r,onClick:function(){i(e.state),l()},"data-testid":"btn-play"},"Jogar"),c.a.createElement("button",{className:"container-form-main-button2",type:"button","data-testid":"btn-settings",onClick:function(){s.push("/Configuration")}},"Configura\xe7\xf5es")),c.a.createElement("footer",{className:"container-form-footer"})))}}]),a}(r.Component)),B=Object(s.b)((function(e){return{token:e.token}}),(function(e){return{dispatchSetUser:function(t){return e(function(e){return{type:"SET_USER",payload:e}}(t))},dispatchFetchToken:function(){return e(x())},dispatchResetGame:function(){return e({type:"RESET_GAME"})}}}))(M),D=(a(106),function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;return Object(y.a)(this,a),(e=t.call(this)).handleClick=function(){e.props.history.push("/")},e.rankingList=function(){var t=e.state.storage.sort((function(e,t){if(e.score<t.score){return 1}if(e.score>t.score){return-1}return 0}));return c.a.createElement("section",{className:"ranking-container"},t.map((function(e,t){var a=e.name,n=e.score,r=e.picture;return c.a.createElement("div",{className:"rank-card",key:t},c.a.createElement("img",{className:"rank-img",src:r,alt:"imagem de perfil do jogador"}),c.a.createElement("h1",{className:"rank-name","data-testid":"player-name-".concat(t)},a),c.a.createElement("h2",{className:"rank-score","data-testid":"player-score-".concat(t)},n))})))},e.state={storage:[]},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.setState({storage:C()})}},{key:"render",value:function(){return c.a.createElement("main",{className:"Ranking"},c.a.createElement("section",{className:"title-container"},c.a.createElement("h1",{className:"ranking-title","data-testid":"ranking-title"},"Ranking"),c.a.createElement("button",{className:"home-button","data-testid":"btn-go-home",type:"button",onClick:this.handleClick},"In\xedcio")),this.rankingList())}}]),a}(r.Component)),V=(a(107),function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.score,n=e.gravatarEmail;return c.a.createElement("header",{className:"Header"},c.a.createElement("img",{className:"player-img",src:O(n),alt:"Imagem de perfil","data-testid":"header-profile-picture"}),c.a.createElement("h1",{className:"player-name","data-testid":"header-player-name"},t),c.a.createElement("p",{className:"player-score"},"Pontua\xe7\xe3o atual:",c.a.createElement("span",{"data-testid":"header-score"}," ".concat(a))))}}]),a}(c.a.Component)),U=Object(s.b)((function(e){return{name:e.player.name,score:e.player.score,gravatarEmail:e.player.gravatarEmail}}),null)(V),G=a(86),Q=a.n(G),J=(a(108),function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(y.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={timer:30,randomCorrectIndex:Math.floor(4*Math.random()),isBtnNextVisible:!1,hasStylesBtns:!1,clickedAnswerIndex:""},e.startTimer=function(){n=setInterval((function(){var t=e.state.timer;t<=0?clearInterval(n):e.setState({timer:t-1},(function(){1===t&&e.setState({hasStylesBtns:!0})}))}),1e3)},e.handleClickAnswer=function(t,a){var r=t.target.value,c=e.state.timer,o=e.props,i=o.dispatchSetScore,s=o.question.difficulty;clearInterval(n),Number(r)===a&&i(c,{hard:3,medium:2,easy:1}[s]),e.setState({isBtnNextVisible:!0,hasStylesBtns:!0,clickedAnswerIndex:r})},e.handleClickNextQuestion=function(){var t=e.props,a=t.questionIndexNext,n=t.questionIndex,r=t.history;n<4?(a(),e.setState({isBtnNextVisible:!1,hasStylesBtns:!1,timer:30,randomCorrectIndex:Math.floor(4*Math.random())},e.startTimer)):r.push("/feedback")},e.setStylesQuestions=function(e,t){return"answer".concat(e?" correct-answer":" wrong-answer")+"".concat(t?" selected-answer":"")},e.renderQuestion=function(e,t,a,n){return c.a.createElement("div",{className:"rotated-card-1"},c.a.createElement("div",{className:"rotated-card-2"},c.a.createElement("div",{className:"question-card"},c.a.createElement("h1",{className:"category","data-testid":"question-category"},t),"Dirk the Daring"===e?c.a.createElement("p",{"data-testid":"question-text"},a):c.a.createElement("p",{className:"question","data-testid":"question-text",dangerouslySetInnerHTML:{__html:n}}))))},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.startTimer()}},{key:"renderMultipleAnswers",value:function(e,t){var a=this,n=this.state,r=n.randomCorrectIndex,o=n.timer,i=n.hasStylesBtns,s=n.isBtnNextVisible,l=n.clickedAnswerIndex,u=Object(p.a)(t);return u.splice(r,0,e),u.map((function(e,n){return c.a.createElement("button",{onClick:function(e){return a.handleClickAnswer(e,r)},className:i?a.setStylesQuestions(n===r,n===Number(l)):"answer",type:"button",disabled:o<1||s,key:n,value:n,"data-testid":n===r?"correct-answer":"wrong-answer".concat(t.indexOf(e))},e)}))}},{key:"renderBoolAnswers",value:function(e){var t=this,a=["True","False"],n=this.state,r=n.timer,o=n.hasStylesBtns,i=n.isBtnNextVisible,s=n.clickedAnswerIndex;return c.a.createElement(c.a.Fragment,null,a.map((function(n,l){return c.a.createElement("button",{type:"button",key:l,onClick:function(n){return t.handleClickAnswer(n,a.indexOf(e))},className:o?t.setStylesQuestions(n===e,l===Number(s)):"answer",disabled:r<1||i,value:l,"data-testid":n===e?"correct-answer":"wrong-answer-0"},n)})))}},{key:"render",value:function(){var e=this.props.question,t=e.type,a=e.category,n=e.question,r=e.correct_answer,o=e.incorrect_answers,i=this.state,s=i.timer,l=i.isBtnNextVisible,u=Q()(n);return c.a.createElement("main",{className:"Question"},c.a.createElement("section",{className:"question-container"},this.renderQuestion(r,a,n,u),c.a.createElement("div",{className:"timer ".concat(s<=5&&" timer-ending")},"".concat(s,"'"))),c.a.createElement("div",{className:"vl"}),c.a.createElement("section",{className:"buttons-container","data-testid":"answer-options"},"multiple"===t?this.renderMultipleAnswers(r,o):this.renderBoolAnswers(r),(l||s<1)&&c.a.createElement("button",{className:"next-button",onClick:this.handleClickNextQuestion,"data-testid":"btn-next",type:"button"},"Pr\xf3xima")))}}]),a}(c.a.Component)),L=Object(s.b)(null,(function(e){return{dispatchSetScore:function(t,a){return e(function(e,t){return{type:"SET_SCORE",payload:10+e*t}}(t,a))}}}))(J),Y=(a(150),function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(y.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={questionIndex:0},e.questionIndexNext=function(){e.setState((function(e){return{questionIndex:e.questionIndex+1}}))},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatchFetchTrivia,a=e.configuration;t(localStorage.getItem("token"),a)}},{key:"componentDidUpdate",value:function(e){var t=e.token,a=this.props,n=a.responseCode,r=a.token,c=a.dispatchFetchToken,o=a.dispatchFetchTrivia,i=a.configuration;n&&t===r?c():n&&o(r,i)}},{key:"render",value:function(){var e=this.props,t=e.questions,a=e.history,n=this.state.questionIndex,r=0===t.length;return c.a.createElement(c.a.Fragment,null,c.a.createElement(U,null),r?c.a.createElement("main",{className:"loading"},"Carregando..."):c.a.createElement(L,{question:t[n],questionIndex:n,questionIndexNext:this.questionIndexNext,history:a}))}}]),a}(r.Component)),H=Object(s.b)((function(e){return{token:e.token,questions:e.trivia.questions,responseCode:e.trivia.responseCode,configuration:e.configs}}),(function(e){return{dispatchFetchTrivia:function(t,a){return e(function(e,t){var a=t.category,n=t.difficulty,r=t.type;return function(){var t=Object(f.a)(d.a.mark((function t(c){var o,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:"TRIVIA_FETCHING"}),o=a+n+r===""?"https://opentdb.com/api.php?amount=5&token=".concat(e):"https://opentdb.com/api.php?amount=5&token=".concat(e,"&category=").concat(a,"&difficulty=").concat(n,"&type=").concat(r),t.prev=2,t.next=5,E(o);case 5:i=t.sent,c(T(i)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),c({type:"TRIVIA_ERROR",payload:t.t0});case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()}(t,a))},dispatchFetchToken:function(){return e(x())}}}))(Y),P=(a(151),function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(y.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).feedback=function(){return e.props.assertions<3?c.a.createElement("h1",{className:"fb-h1","data-testid":"feedback-text"},"Could be better..."):c.a.createElement("h1",{className:"fb-h1","data-testid":"feedback-text"},"Well Done!")},e.redirectToLogin=function(){e.props.history.push("/")},e.redirectToRanking=function(){e.props.history.push("/ranking")},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.player;""!==e.name&&function(e){var t=e.name,a=e.score,n=e.gravatarEmail,r=O(n),c=C();if(c.length){var o=c.every((function(e){return!(e.name===t&&e.picture===r)})),i=c.map((function(e){return e.name===t&&e.picture===r&&e.score<a?{name:t,score:a,picture:r}:e}));o&&i.push({name:t,score:a,picture:r}),j(i)}else j([{name:t,score:a,picture:r}])}(e)}},{key:"render",value:function(){var e=this.props,t=e.assertions,a=e.score;return c.a.createElement(c.a.Fragment,null,c.a.createElement(U,null),c.a.createElement("main",{className:"FeedBack"},c.a.createElement("section",{className:"feedback-container"},this.feedback(),c.a.createElement("h2",{className:"fb-h2"},"Voce acertou",c.a.createElement("span",{"data-testid":"feedback-total-question"}," ".concat(t," ")),"quest\xf5es!"),c.a.createElement("h2",{className:"fb-h2"},"Um total de",c.a.createElement("span",{"data-testid":"feedback-total-score"}," ".concat(a," ")),"pontos.")),c.a.createElement("section",{className:"fb-buttons-container"},c.a.createElement("button",{className:"play-again-button",type:"button","data-testid":"btn-play-again",onClick:this.redirectToLogin},"Jogar novamente"),c.a.createElement("button",{type:"button","data-testid":"btn-ranking",onClick:this.redirectToRanking},"Ver Ranking"))))}}]),a}(c.a.Component)),W=Object(s.b)((function(e){return{assertions:e.player.assertions,score:e.player.score,player:e.player}}),null)(P);function K(){return c.a.createElement("div",{className:"App"},c.a.createElement(u.c,null,c.a.createElement(u.a,{exact:!0,path:"/",component:B}),c.a.createElement(u.a,{path:"/Trivia",component:H}),c.a.createElement(u.a,{path:"/Ranking",component:D}),c.a.createElement(u.a,{path:"/Configuration",component:R}),c.a.createElement(u.a,{path:"/feedback",component:W})))}a(155);var $=a(26),z=a(89),X=a(88),Z=a(2),ee={name:"",assertions:0,score:0,gravatarEmail:""},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object(Z.a)(Object(Z.a)({},e),{},{name:t.payload.name,gravatarEmail:t.payload.gravatarEmail});case"SET_SCORE":return Object(Z.a)(Object(Z.a)({},e),{},{assertions:e.assertions+1,score:e.score+t.payload});case"RESET_GAME":return Object(Z.a)(Object(Z.a)({},e),{},{score:0,assertions:0});default:return e}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOKEN_SUCCESS":return t.payload;case"RESET_GAME":return"";default:return e}},ne={isFetching:!1,error:void 0,questions:[],responseCode:0},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TRIVIA_FETCHING":return Object(Z.a)(Object(Z.a)({},e),{},{isFetching:!0});case"TRIVIA_SUCCESS":return Object(Z.a)(Object(Z.a)({},e),{},{isFetching:!1,questions:t.payload.results,responseCode:t.payload.response_code});case"TRIVIA_ERROR":return Object(Z.a)(Object(Z.a)({},e),{},{isFetching:!1,error:t.payload});case"RESET_GAME":return Object(Z.a)(Object(Z.a)({},e),{},{questions:[],responseCode:0});default:return e}},ce={category:"",difficulty:"",type:""},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CATEGORY":return Object(Z.a)(Object(Z.a)({},e),{},{category:t.payload});case"SET_DIFFICULTY":return Object(Z.a)(Object(Z.a)({},e),{},{difficulty:t.payload});case"SET_TYPE":return Object(Z.a)(Object(Z.a)({},e),{},{type:t.payload});default:return e}},ie=Object($.combineReducers)({player:te,token:ae,trivia:re,configs:oe}),se=Object($.createStore)(ie,Object(X.composeWithDevTools)(Object($.applyMiddleware)(z.a)));window.Cypress&&(window.store=se);var le=se;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(l.a,null,c.a.createElement(s.a,{store:le},c.a.createElement(K,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},46:function(e,t){},47:function(e,t){},72:function(e,t){},78:function(e,t){},85:function(e,t,a){e.exports=a.p+"static/media/svg_avatar.3973cd6b.svg"},90:function(e,t,a){e.exports=a(156)}},[[90,1,2]]]);
//# sourceMappingURL=main.96ed9c70.chunk.js.map